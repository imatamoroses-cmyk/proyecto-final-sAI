CREATE SCHEMA imatamoros;

SET search_path TO imatamoros;

CREATE TABLE cliente (
    id_cliente SERIAL PRIMARY KEY,
    tipo_identificacion VARCHAR(20),
    identificacion VARCHAR(20) UNIQUE,
    nombre VARCHAR(100),
    apellido VARCHAR(100),
    telefono VARCHAR(20),
    email VARCHAR(100),
    direccion TEXT,
    activo BOOLEAN DEFAULT TRUE,
    creado_en TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE empleado (
    id_empleado SERIAL PRIMARY KEY,
    nombre VARCHAR(100),
    apellido VARCHAR(100),
    telefono VARCHAR(20),
    especialidad VARCHAR(100),
    activo BOOLEAN DEFAULT TRUE,
    creado_en TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE servicio (
    id_servicio SERIAL PRIMARY KEY,
    nombre_servicio VARCHAR(100),
    descripcion TEXT,
    duracion_minutos INT,
    precio NUMERIC(6,2),
    activo BOOLEAN DEFAULT TRUE,
    creado_en TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE cita (
    id_cita SERIAL PRIMARY KEY,
    fecha_cita DATE NOT NULL,
    estado VARCHAR(30),
    id_cliente INT REFERENCES cliente(id_cliente),
    id_empleado INT REFERENCES empleado(id_empleado),
    creado_en TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE detalle_cita (
    id_detalle_cita SERIAL PRIMARY KEY,
    id_cita INT REFERENCES cita(id_cita),
    id_servicio INT REFERENCES servicio(id_servicio),
    precio_servicio NUMERIC(6,2),
    cantidad INT,
    subtotal NUMERIC(8,2)
);
