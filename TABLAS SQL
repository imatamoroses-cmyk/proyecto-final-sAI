CREATE SCHEMA isaac;

CREATE TABLE isaac.cliente (
  id_cliente SERIAL PRIMARY KEY,
  tipo_identificacion VARCHAR(10),
  identificacion VARCHAR(13),
  nombre VARCHAR(50),
  apellido VARCHAR(50),
  telefono VARCHAR(20),
  email VARCHAR(100) UNIQUE,
  direccion VARCHAR(100),
  activo BOOLEAN DEFAULT TRUE,
  fecha_creacion TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE isaac.empleado (
  id_empleado SERIAL PRIMARY KEY,
  nombre VARCHAR(50),
  apellido VARCHAR(50),
  telefono VARCHAR(20),
  especialidad VARCHAR(50),
  activo BOOLEAN DEFAULT TRUE
);

CREATE TABLE isaac.servicio (
  id_servicio SERIAL PRIMARY KEY,
  nombre_servicio VARCHAR(50),
  descripcion VARCHAR(100),
  duracion_minutos INT,
  precio DECIMAL(10,2)
);

CREATE TABLE isaac.cita (
  id_cita SERIAL PRIMARY KEY,
  fecha_cita TIMESTAMP,
  estado VARCHAR(20),
  id_cliente INT,
  id_empleado INT,
  id_servicio INT,
  FOREIGN KEY (id_cliente) REFERENCES isaac.cliente(id_cliente),
  FOREIGN KEY (id_empleado) REFERENCES isaac.empleado(id_empleado),
  FOREIGN KEY (id_servicio) REFERENCES isaac.servicio(id_servicio)
);

CREATE TABLE isaac.detalle_cita (
  id_detalle SERIAL PRIMARY KEY,
  id_cita INT,
  id_servicio INT,
  precio_servicio DECIMAL(10,2),
  cantidad INT,
  subtotal DECIMAL(10,2),
  FOREIGN KEY (id_cita) REFERENCES isaac.cita(id_cita),
  FOREIGN KEY (id_servicio) REFERENCES isaac.servicio(id_servicio)
);
